# Basic configuration
Syslog                  yes
SyslogSuccess           yes
LogWhy                  yes

# Signing and verification
Canonicalization        relaxed/simple
Mode                    sv
SubDomains              no

# Auto-restart
AutoRestart             yes
AutoRestartRate         10/1h
Background              yes

# Timeouts
DNSTimeout              5
SignatureAlgorithm      rsa-sha256

# Socket configuration (CRITICAL - must be inet socket for Docker)
Socket                  inet:8891@0.0.0.0

# Permissions
UMask                   002
UserID                  opendkim:opendkim

# Database files (CRITICAL - all must be present)
KeyTable                /etc/opendkim/KeyTable
SigningTable            /etc/opendkim/SigningTable
ExternalIgnoreList      /etc/opendkim/TrustedHosts
InternalHosts           /etc/opendkim/TrustedHosts  # THIS LINE WAS MISSING!

# Signing options
OversignHeaders         From
RequireSafeKeys         no
SendReports             yes

# Debugging (optional)
# TemporaryDirectory    /var/tmp/opendkim
# PidFile               /var/run/opendkim/opendkim.pid